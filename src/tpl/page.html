{{$subItemPrefix := .SubItemPrefix}}
<!DOCTYPE html>
<html lang="">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
	<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
	<meta name="viewport" content="initial-scale=1"/>
	<meta name="format-detection" content="telephone=no"/>
	<meta name="renderer" content="webkit"/>
	<meta name="wap-font-scale" content="no"/>
	<title>{{.Path}}</title>

	<link rel="stylesheet" type="text/css" href="{{.RootRelPath}}/../assert/main.css"/>
</head>
<body class="{{if .IsRoot}}root-dir{{else}}sub-dir{{end}}">

<ol class="path-list">
	{{range .Paths}}
		<li><a href="{{.Path}}">{{.Name}}</a></li>
	{{end}}
</ol>

{{if .CanUpload}}
	<div class="upload">
		<form method="POST" enctype="multipart/form-data">
			<input type="file" name="files" class="files" multiple="multiple" accept="*/*"/>
			<input type="submit" value="Upload"/>
		</form>
	</div>
{{end}}

{{if .CanArchive}}
	<div class="archive">
		<a href="{{$subItemPrefix}}?tar" download="{{.ItemName}}.tar">.tar</a>
		<a href="{{$subItemPrefix}}?tgz" download="{{.ItemName}}.tar.gz">.tar.gz</a>
		<a href="{{$subItemPrefix}}?zip" download="{{.ItemName}}.zip">.zip</a>
	</div>
{{end}}

<ul class="item-list">
	<li class="dir parent">
		<a href="{{if .IsRoot}}./{{else}}../{{end}}">
			<span class="name">../</span>
			<span class="size"></span>
			<span class="time"></span>
		</a>
	</li>
	{{range .SubItems}}
		{{$isDir := .IsDir}}{{$subItemName := .Name}}
		<li class="{{if $isDir}}dir{{else}}file{{end}}">
			<a href="{{$subItemPrefix}}{{$subItemName}}{{if $isDir}}/{{end}}">
				<span class="name">{{fmtFilename $subItemName}}{{if $isDir}}/{{end}}</span>
				<span class="size">{{if not $isDir}}{{fmtSize .Size}}{{end}}</span>
				<span class="time">{{fmtTime .ModTime}}</span>
			</a>
		</li>
	{{end}}
</ul>

{{range .Errors}}
	<div class="error">{{.}}</div>
{{end}}

<script type="text/javascript" src="{{.RootRelPath}}/../assert/main.js"></script>
</body>
</html>
